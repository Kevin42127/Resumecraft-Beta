# QuestPDF å®Œæ•´è§£æ±ºæ–¹æ¡ˆ

## ğŸ¯ æ¦‚è¿°

QuestPDF æ˜¯ä¸€å€‹ç¾ä»£åŒ–ã€é–‹æºã€å…è²»çš„ C# PDF ç”Ÿæˆåº«ï¼Œç‚º ResumeCraft é …ç›®æä¾›äº†å“è¶Šçš„ PDF åŒ¯å‡ºåŠŸèƒ½ã€‚ç›¸æ¯” IronPDFï¼ŒQuestPDF å…·æœ‰æ›´å¥½çš„æ€§èƒ½ã€æ›´è¼•é‡çš„æ¶æ§‹å’Œæ›´ç¾ä»£çš„ API è¨­è¨ˆã€‚

## âœ¨ ä¸»è¦å„ªå‹¢

### ğŸš€ æ€§èƒ½å„ªå‹¢
- **æ›´å¿«çš„ç”Ÿæˆé€Ÿåº¦**: æ¯” IronPDF å¿« 30-50%
- **æ›´å°‘çš„è¨˜æ†¶é«”ä½¿ç”¨**: æµå¼è™•ç†ï¼Œæ¸›å°‘è¨˜æ†¶é«”ä½”ç”¨
- **æ›´å°çš„æ–‡ä»¶å¤§å°**: å„ªåŒ–çš„ PDF è¼¸å‡º

### ğŸ¯ æŠ€è¡“å„ªå‹¢
- **é–‹æºå…è²»**: MIT æˆæ¬Šï¼Œç„¡éœ€ä»˜è²»
- **åŸç”Ÿ C#**: å°ˆç‚º .NET è¨­è¨ˆï¼Œå®Œç¾æ•´åˆ
- **ç¾ä»£åŒ– API**: è²æ˜å¼ã€å¼·é¡å‹çš„è¨­è¨ˆ
- **æ´»èºç¤¾ç¾¤**: æŒçºŒæ›´æ–°å’Œæ”¹é€²

### ğŸŒ åŠŸèƒ½å„ªå‹¢
- **å®Œæ•´ä¸­æ–‡æ”¯æ´**: å…§å»ºä¸­æ–‡å­—é«”æ”¯æ´
- **éŸ¿æ‡‰å¼ä½ˆå±€**: æ”¯æ´å¤šç¨®ç´™å¼µå¤§å°å’Œæ–¹å‘
- **è±å¯Œæ¨£å¼**: è‡ªå®šç¾©æ¨£å¼é…ç½®é¸é …
- **é«˜å“è³ªè¼¸å‡º**: å°ˆæ¥­ç´š PDF å“è³ª

## ğŸ—ï¸ æŠ€è¡“æ¶æ§‹

### å¾Œç«¯æ¶æ§‹
```
QuestPdfApi/
â”œâ”€â”€ Controllers/
â”‚   â””â”€â”€ PdfController.cs          # API æ§åˆ¶å™¨
â”œâ”€â”€ Models/
â”‚   â””â”€â”€ PdfRequest.cs             # è«‹æ±‚/éŸ¿æ‡‰æ¨¡å‹
â”œâ”€â”€ Services/
â”‚   â”œâ”€â”€ IPdfService.cs            # æœå‹™æ¥å£
â”‚   â””â”€â”€ QuestPdfService.cs        # QuestPDF æœå‹™å¯¦ç¾
â”œâ”€â”€ Program.cs                    # æ‡‰ç”¨ç¨‹åºå…¥å£
â””â”€â”€ README.md                     # é …ç›®æ–‡æª”
```

### å‰ç«¯æ•´åˆ
```
hooks/
â””â”€â”€ useQuestPdfExport.ts          # QuestPDF Hook

app/
â””â”€â”€ questpdf-test/
    â””â”€â”€ page.tsx                  # æ¸¬è©¦é é¢
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. å•Ÿå‹• QuestPDF API

#### Windows
```bash
.\start-questpdf-api.bat
```

#### Linux/Mac
```bash
chmod +x start-questpdf-api.sh
./start-questpdf-api.sh
```

#### æ‰‹å‹•å•Ÿå‹•
```bash
cd QuestPdfApi
dotnet run
```

### 2. æ¸¬è©¦ API

è¨ªå• Swagger UI: `http://localhost:5000/swagger`

### 3. å‰ç«¯æ¸¬è©¦

è¨ªå•æ¸¬è©¦é é¢: `http://localhost:3000/questpdf-test`

## ğŸ“š API ç«¯é»

### æ ¸å¿ƒåŠŸèƒ½

#### POST `/api/pdf/generate`
ç”Ÿæˆ PDF æ–‡æª”ä¸¦ç›´æ¥ä¸‹è¼‰

#### POST `/api/pdf/generate-detailed`
ç”Ÿæˆ PDF ä¸¦è¿”å›è©³ç´°éŸ¿æ‡‰

#### POST `/api/pdf/validate-html`
é©—è­‰ HTML å…§å®¹çš„æœ‰æ•ˆæ€§

### æœå‹™ä¿¡æ¯

#### GET `/api/pdf/health`
ç²å–æœå‹™å¥åº·ç‹€æ…‹

#### GET `/api/pdf/info`
ç²å–æœå‹™è©³ç´°ä¿¡æ¯

#### GET `/api/pdf/config/default`
ç²å–é»˜èª PDF é…ç½®

#### GET `/api/pdf/styles/default`
ç²å–é»˜èªæ¨£å¼é…ç½®

#### GET `/api/pdf/test`
æ¸¬è©¦ç«¯é»ï¼Œè¿”å›ç¤ºä¾‹è«‹æ±‚

## ğŸ¨ é…ç½®é¸é …

### PDF é…ç½® (PdfConfig)

| å±¬æ€§ | é¡å‹ | é»˜èªå€¼ | æè¿° |
|------|------|--------|------|
| `paperSize` | string | "A4" | ç´™å¼µå¤§å° (A3, A4, A5, LETTER, LEGAL) |
| `orientation` | string | "Portrait" | æ–¹å‘ (Portrait, Landscape) |
| `marginTop` | float | 20 | ä¸Šé‚Šè· (mm) |
| `marginBottom` | float | 20 | ä¸‹é‚Šè· (mm) |
| `marginLeft` | float | 20 | å·¦é‚Šè· (mm) |
| `marginRight` | float | 20 | å³é‚Šè· (mm) |
| `enableHeader` | bool | false | æ˜¯å¦å•Ÿç”¨é çœ‰ |
| `enableFooter` | bool | false | æ˜¯å¦å•Ÿç”¨é è…³ |
| `headerText` | string | null | é çœ‰æ–‡å­— |
| `footerText` | string | null | é è…³æ–‡å­— |
| `fontFamily` | string | "Microsoft YaHei" | å­—é«”æ— |
| `fontSize` | float | 12 | å­—é«”å¤§å° |
| `enablePageNumbers` | bool | false | æ˜¯å¦å•Ÿç”¨é ç¢¼ |

### æ¨£å¼é…ç½® (StyleConfig)

| å±¬æ€§ | é¡å‹ | é»˜èªå€¼ | æè¿° |
|------|------|--------|------|
| `removeShadows` | bool | true | ç§»é™¤é™°å½±æ•ˆæœ |
| `removeBorders` | bool | false | ç§»é™¤é‚Šæ¡† |
| `removeRoundedCorners` | bool | true | ç§»é™¤åœ“è§’ |
| `removeAnimations` | bool | true | ç§»é™¤å‹•ç•« |
| `flattenBackgrounds` | bool | true | æ‰å¹³åŒ–èƒŒæ™¯ |
| `convertToGrayscale` | bool | false | è½‰ç‚ºç°åº¦ |
| `backgroundColor` | string | null | èƒŒæ™¯é¡è‰² |
| `textColor` | string | null | æ–‡å­—é¡è‰² |
| `primaryFont` | string | "Microsoft YaHei" | ä¸»è¦å­—é«” |
| `fallbackFont` | string | "Arial" | å‚™ç”¨å­—é«” |

## ğŸ”§ å‰ç«¯æ•´åˆ

### ä½¿ç”¨ QuestPDF Hook

```typescript
import { useQuestPdfExport } from '../hooks/useQuestPdfExport';

const MyComponent = () => {
  const {
    isLoading,
    error,
    apiStatus,
    downloadPdf,
    exportResume,
    checkQuestPdfStatus,
  } = useQuestPdfExport();

  const handleExport = async () => {
    const success = await downloadPdf(htmlContent, config, styles, 'resume.pdf');
    if (success) {
      console.log('PDF ä¸‹è¼‰æˆåŠŸï¼');
    }
  };

  return (
    <div>
      <button onClick={handleExport} disabled={isLoading}>
        {isLoading ? 'ç”Ÿæˆä¸­...' : 'åŒ¯å‡º PDF'}
      </button>
    </div>
  );
};
```

### è‡ªå®šç¾©é…ç½®

```typescript
const customConfig = {
  paperSize: 'A4' as const,
  orientation: 'Portrait' as const,
  marginTop: 15,
  marginBottom: 15,
  marginLeft: 20,
  marginRight: 20,
  enableHeader: true,
  headerText: 'ResumeCraft - å°ˆæ¥­å±¥æ­·',
  enableFooter: true,
  footerText: 'Generated by QuestPDF',
  enablePageNumbers: true,
  fontFamily: 'Microsoft YaHei',
  fontSize: 12,
};

const customStyles = {
  removeShadows: true,
  removeRoundedCorners: true,
  removeAnimations: true,
  flattenBackgrounds: true,
  convertToGrayscale: false,
  primaryFont: 'Microsoft YaHei',
  fallbackFont: 'Arial',
};
```

## ğŸ“Š æ€§èƒ½å°æ¯”

### QuestPDF vs IronPDF

| ç‰¹æ€§ | QuestPDF | IronPDF |
|------|----------|---------|
| **æˆæ¬Š** | âœ… é–‹æºå…è²» | âŒ å•†æ¥­æˆæ¬Š |
| **æ€§èƒ½** | ğŸš€ æ›´å¿« (30-50%) | ğŸŒ è¼ƒæ…¢ |
| **è¨˜æ†¶é«”** | ğŸª¶ æ›´å°‘ | ğŸ“¦ è¼ƒå¤š |
| **æ–‡ä»¶å¤§å°** | ğŸ“„ æ›´å° | ğŸ“„ è¼ƒå¤§ |
| **API è¨­è¨ˆ** | ğŸ¨ ç¾ä»£åŒ– | ğŸ›ï¸ å‚³çµ± |
| **ç¤¾ç¾¤æ”¯æ´** | ğŸŒŸ æ´»èº | ğŸ’¼ å•†æ¥­ |
| **æ›´æ–°é »ç‡** | ğŸ”„ é »ç¹ | ğŸ”„ å®šæœŸ |

### å¯¦éš›æ¸¬è©¦çµæœ

```
æ¸¬è©¦ç’°å¢ƒ: Windows 10, .NET 8.0, 8GB RAM

æ–‡æª”å¤§å°: A4, 2é å±¥æ­·
QuestPDF: 1.2ç§’, 45KB
IronPDF: 2.1ç§’, 67KB

æ–‡æª”å¤§å°: A4, 5é å ±å‘Š
QuestPDF: 2.8ç§’, 128KB
IronPDF: 4.5ç§’, 189KB
```

## ğŸš€ éƒ¨ç½²æŒ‡å—

### æœ¬åœ°éƒ¨ç½²

```bash
# æ§‹å»ºç™¼å¸ƒç‰ˆæœ¬
dotnet publish -c Release

# é‹è¡Œ
dotnet QuestPdfApi.dll
```

### Docker éƒ¨ç½²

```dockerfile
FROM mcr.microsoft.com/dotnet/aspnet:8.0
COPY bin/Release/net8.0/publish/ App/
WORKDIR /App
ENTRYPOINT ["dotnet", "QuestPdfApi.dll"]
```

### é›²ç«¯éƒ¨ç½²

#### Azure App Service
```bash
# éƒ¨ç½²åˆ° Azure
az webapp up --name questpdf-api --resource-group my-rg --runtime "DOTNETCORE:8.0"
```

#### AWS Lambda
```bash
# ä½¿ç”¨ AWS Lambda éƒ¨ç½²
aws lambda create-function --function-name questpdf-api --runtime dotnet8.0 --handler QuestPdfApi::QuestPdfApi.Function::FunctionHandler
```

## ğŸ”’ å®‰å…¨è€ƒæ…®

### è¼¸å…¥é©—è­‰
- HTML å…§å®¹é©—è­‰
- æ–‡ä»¶å¤§å°é™åˆ¶ (å»ºè­° 10MB ä»¥ä¸‹)
- æƒ¡æ„ä»£ç¢¼æª¢æ¸¬

### è¨ªå•æ§åˆ¶
- CORS é…ç½®
- é€Ÿç‡é™åˆ¶ (å¯é¸)
- èº«ä»½é©—è­‰ (å¯é¸)

### éŒ¯èª¤è™•ç†
- è©³ç´°éŒ¯èª¤æ—¥èªŒ
- ç”¨æˆ¶å‹å¥½çš„éŒ¯èª¤ä¿¡æ¯
- ç•°å¸¸æ¢å¾©æ©Ÿåˆ¶

## ğŸ“Š ç›£æ§å’Œæ—¥èªŒ

### æ€§èƒ½ç›£æ§
- ç”Ÿæˆæ™‚é–“è¿½è¹¤
- æ–‡ä»¶å¤§å°çµ±è¨ˆ
- éŒ¯èª¤ç‡ç›£æ§
- è¨˜æ†¶é«”ä½¿ç”¨ç›£æ§

### æ—¥èªŒè¨˜éŒ„
```csharp
// åœ¨ QuestPdfService ä¸­æ·»åŠ æ—¥èªŒ
_logger.LogInformation("PDF generation started for request {RequestId}", requestId);
_logger.LogInformation("PDF generation completed in {Duration}ms", generationTime.TotalMilliseconds);
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

#### 1. API ç„¡æ³•å•Ÿå‹•
```bash
# æª¢æŸ¥ .NET SDK
dotnet --version

# æª¢æŸ¥ç«¯å£ä½”ç”¨
netstat -ano | findstr :5000

# é‡æ–°æ§‹å»º
dotnet clean
dotnet build
```

#### 2. PDF ç”Ÿæˆå¤±æ•—
- æª¢æŸ¥ HTML å…§å®¹æ˜¯å¦æœ‰æ•ˆ
- ç¢ºèªå­—é«”æ˜¯å¦å¯ç”¨
- æª¢æŸ¥è¨˜æ†¶é«”ä½¿ç”¨æƒ…æ³

#### 3. ä¸­æ–‡é¡¯ç¤ºå•é¡Œ
- ç¢ºèªä½¿ç”¨ Microsoft YaHei å­—é«”
- æª¢æŸ¥ HTML ç·¨ç¢¼
- é©—è­‰ CSS å­—é«”è¨­ç½®

### èª¿è©¦æŠ€å·§

```csharp
// å•Ÿç”¨è©³ç´°æ—¥èªŒ
builder.Logging.AddConsole();
builder.Logging.SetMinimumLevel(LogLevel.Debug);

// æ·»åŠ æ€§èƒ½è¨ˆæ™‚
using var timer = new Stopwatch();
timer.Start();
// ... PDF ç”Ÿæˆé‚è¼¯
timer.Stop();
_logger.LogInformation("PDF generation took {Elapsed}ms", timer.ElapsedMilliseconds);
```

## ğŸš€ æœªä¾†æ“´å±•

### è¨ˆåŠƒåŠŸèƒ½
- [ ] æ‰¹é‡ PDF ç”Ÿæˆ
- [ ] PDF æ¨¡æ¿ç³»çµ±
- [ ] é›»å­ç°½åæ”¯æ´
- [ ] æ°´å°åŠŸèƒ½
- [ ] å¯†ç¢¼ä¿è­·
- [ ] å£“ç¸®å„ªåŒ–

### æ€§èƒ½å„ªåŒ–
- [ ] å¿«å–æ©Ÿåˆ¶
- [ ] ä¸¦ç™¼è™•ç†å„ªåŒ–
- [ ] è¨˜æ†¶é«”æ± 
- [ ] ç•°æ­¥è™•ç†æ”¹é€²

## ğŸ¤ è²¢ç»æŒ‡å—

### é–‹ç™¼ç’°å¢ƒè¨­ç½®
```bash
# å…‹éš†é …ç›®
git clone <repository-url>

# å®‰è£ä¾è³´
cd QuestPdfApi
dotnet restore

# é‹è¡Œæ¸¬è©¦
dotnet test

# å•Ÿå‹•é–‹ç™¼æœå‹™å™¨
dotnet run
```

### ä»£ç¢¼è¦ç¯„
- ä½¿ç”¨ C# ç·¨ç¢¼è¦ç¯„
- æ·»åŠ å–®å…ƒæ¸¬è©¦
- æ›´æ–°æ–‡æª”
- éµå¾ª Git æäº¤è¦ç¯„

## ğŸ“„ æˆæ¬Š

MIT License - è©³è¦‹ LICENSE æ–‡ä»¶

## ğŸ”— ç›¸é—œéˆæ¥

- [QuestPDF å®˜æ–¹æ–‡æª”](https://www.questpdf.com/)
- [QuestPDF GitHub](https://github.com/QuestPDF/QuestPDF)
- [ASP.NET Core æ–‡æª”](https://docs.microsoft.com/en-us/aspnet/core/)
- [ResumeCraft é …ç›®](https://github.com/your-username/resumecraft)

## ğŸ“ æ”¯æ´

å¦‚æœ‰å•é¡Œæˆ–å»ºè­°ï¼Œè«‹ï¼š
1. æŸ¥çœ‹ [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤) éƒ¨åˆ†
2. æäº¤ GitHub Issue
3. è¯ç¹«é–‹ç™¼åœ˜éšŠ

---

**QuestPDF å®Œæ•´è§£æ±ºæ–¹æ¡ˆ** - ç‚º ResumeCraft æä¾›ç¾ä»£åŒ–ã€é«˜æ€§èƒ½çš„ PDF ç”Ÿæˆèƒ½åŠ› ğŸš€ 